!function(){function t(t,e,s){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var n=s.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}System.register(["./@rive-app-legacy-be2f0457.js","./lodash-legacy-f0dca915.js","./TabMenu.vue_vue_type_style_index_0_scss_true_lang-legacy-dc6656ea.js","./@ionic-legacy-c780cb28.js","./index-legacy-43f0e8e2.js","./dayjs-legacy-572e4a8d.js","./StdntClassDetail-legacy-7a42e7ef.js","./@awesome-cordova-plugins-legacy-9008858f.js","./@capacitor-legacy-096cda38.js","./search-wifi-rcptn-hist-legacy-e612cff3.js","./wifi-rcptn-hist-legacy-c0ccd084.js","./att_untact_cd-legacy-6aab5e57.js","./@vue-legacy-623c6306.js","./@stencil-legacy-8e2b9178.js","./vue-router-legacy-979b5870.js","./ionicons-legacy-5f2e46b4.js","./tslib-legacy-8092f78e.js","./vuex-legacy-c35c3fa5.js","./@vueuse-legacy-daad712d.js","./axios-legacy-50a673bb.js","./weekList-legacy-1229ead5.js","./school-legacy-6eea78e6.js","./calendar-legacy-1dca3428.js","./rxjs-legacy-607d187a.js"],(function(e,s){"use strict";var n,o,i,a,c,l,r,h,u,d,p,m,f,g,S,D,C,I,w,k,b,y,v,L,A,R,P,_,N,Y,B,j,M,H,T,$,O,q,U,Q;return{setters:[null,null,t=>{n=t.h,o=t.s,i=t.b,a=t.c,c=t.d,l=t.e,r=t.f,h=t.g,u=t.a},t=>{d=t.Q,p=t.H},t=>{m=t._,f=t.a},null,t=>{g=t.S},t=>{S=t.B,D=t.W},t=>{C=t.G},t=>{I=t.S,w=t.a,k=t.n},t=>{b=t.A,y=t.W},t=>{v=t.A},t=>{L=t.v,A=t.J,R=t.C,P=t.I,_=t.P,N=t.N,Y=t.F,B=t.L,j=t.M,M=t.G,H=t.H,T=t.r,$=t.A,O=t.x,q=t.y,U=t.z,Q=t.u},null,null,null,null,null,null,null,null,null,null,null],execute:function(){const s=(t,e,s,n)=>{const o=(n-e)*Math.PI/180,i=(s-t)*Math.PI/180,a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 1e3*(6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))))};class W{constructor(){t(this,"ltBldgCd",""),t(this,"ltrmCd","")}}class x{constructor(){t(this,"ltBldgCd",""),t(this,"ltrmCd","")}}class F{constructor(){t(this,"openYr",""),t(this,"openShtmCd",""),t(this,"openOrgnClsfCd",""),t(this,"openSust",""),t(this,"openSbjtNo",""),t(this,"ltStaffNo","")}}class G{constructor(){t(this,"ltBldgCd",""),t(this,"ltrmCd","")}}const E={name:"stdnt-class-regist",components:{IonBadge:d},data(){return{gps:{lat:0,lot:0},scanOpt:{showFlipCameraButton:!0,prompt:"QR 코드를 영역에 맞춰 주세요.",resultDisplayDuration:0,formats:"QR_CODE"},network:{name:"",macAddress:""},qrData:{},startTime:"",endTime:"",now:{yearStr:(new Date).getFullYear(),monthStr:((new Date).getMonth()+1).toString().padStart(2,"0"),dateStr:(new Date).getDate().toString().padStart(2,"0"),dayStr:["일","월","화","수","목","금","토"][(new Date).getDay()],hourStr:(new Date).getHours().toString().padStart(2,"0"),minStr:(new Date).getMinutes().toString().padStart(2,"0"),secStr:(new Date).getSeconds().toString().padStart(2,"0")},dayStrArr:["일","월","화","수","목","금","토"],attChk:!1,quitChk:!1,cate:"",lectureInfo:{},searchUlsLtrmInfm:new W,searchUlsLtrmDtl:new x,ulsLtrmInfm:{},searchSbjtMng:new F,lectureroomDetailList:[],hrStngDiv:0,detmHrDiv:0,classTime:!1,popupYn:!1,beaconPopupYn:this.$store.state.beaconPopup.visible,wifiCheck:!1,gpsCheck:!1,myLat:"",myLot:"",searchWifiRcptnHist:new I,seachBeaconRcptnHist:new G,searchAttHist:new n,untactCd:new v,activeTabBtn:1,attLocRecord:{},latYn:!1,lotYn:!1,histList:[],beaconList:[],check:!1,qrCheck:!1,beaconAuthStatus:!1,codeCheck:!1,attTypeName:null,untactPopupYn:!1,checkDate:w().checkDate,yy:w().yy}},setup:()=>({status1:o,status2:i,status3:a,status4:c,status5:l,status6:r,status7:h}),mounted(){setInterval((()=>{this.now=k()}),1e3)},watch:{"$store.state.stdnt.lectureInfo":function(){this.lectureInfo=this.$store.state.stdnt.lectureInfo,this.lectureInfo&&this.checkAtt()},"$store.state.accessPopup.showAccessPopup":function(){!0!==this.$store.state.accessPopup.showAccessPopup&&!1===this.untactPopupYn?this.checkGps():!0!==this.$store.state.accessPopup.showAccessPopup&&!0===this.untactPopupYn&&this.setProfsrParam()},"$store.state.accessPopup.update":function(){this.$store.state.accessPopup.update&&(this.checkAtt(),this.lectureInfo.attPrcsCdYn="Y",this.$store.commit("accessPopup/updateData",!1))},"$store.state.accessPopup.showCodeAttPopup":function(){this.$store.state.accessPopup.showCodeAttPopup||this.checkAtt()}},methods:{checkAtt(){this.searchAttHist.openYr=this.lectureInfo.openYy,this.searchAttHist.openShtmCd=this.lectureInfo.openShtmCd,this.searchAttHist.openOrgnClsfCd=this.lectureInfo.openOrgnClsfCd,this.searchAttHist.openDclss=this.lectureInfo.openDclss,this.searchAttHist.openSbjtNo=this.lectureInfo.openSbjtNo,this.searchAttHist.ltStaffNo=this.lectureInfo.staffNo,this.searchAttHist.stdNo=this.lectureInfo.stdNo,this.searchAttHist.attYmd=this.checkDate,this.lectureInfo.skpDt&&(this.searchAttHist.skltDt=this.lectureInfo.skpDt),this.searchWifiRcptnHist.openYr=this.lectureInfo.openYy,this.searchWifiRcptnHist.openShtmCd=this.lectureInfo.openShtmCd,this.searchWifiRcptnHist.openOrgnClsfCd=this.lectureInfo.openOrgnClsfCd,this.searchWifiRcptnHist.openDclss=this.lectureInfo.openDclss,this.searchWifiRcptnHist.openSbjtNo=this.lectureInfo.openSbjtNo,this.searchWifiRcptnHist.ltStaffNo=this.lectureInfo.staffNo,this.searchWifiRcptnHist.stdNo=this.lectureInfo.stdNo,this.searchWifiRcptnHist.attYmd=this.checkDate,this.lectureInfo.skpDt&&(this.searchWifiRcptnHist.skltDt=this.lectureInfo.skpDt),this.$store.dispatch("common/getAttendanceList",this.searchAttHist).then((t=>{if(t.data.resultData.length>0){this.network.macAddress=t.data.resultData[0].wifiIp,this.gps.lat=t.data.resultData[0].lat,this.gps.lot=t.data.resultData[0].lot,this.startTime=t.data.resultData[0].attPrcsDt;const e=t.data.resultData[0].attDiv;null==e?this.attTypeName="미출석":(this.attChk=!0,this.attTypeName=u(e).text)}this.$store.dispatch("common/getAttendanceRecordList",this.searchWifiRcptnHist).then((t=>{t.data.resultData.length>0&&(this.histList=t.data.resultData,t.data.resultData.forEach((t=>{"퇴실정보등록"===t.wifiRcptnItem?this.quitChk=!0:"중간출석"===t.wifiRcptnItem&&(this.attLocRecord=t)})))})),this.getLectureroomDetailList(),this.getLectureroomInfo(),this.getHrStngDiv()}))},getLectureroomDetailList(){this.searchUlsLtrmDtl.ltBldgCd=this.lectureInfo.ltBldgCD,this.searchUlsLtrmDtl.ltrmCd=this.lectureInfo.ltrmCd,this.$store.dispatch("common/getLectureroomDetailList",this.searchUlsLtrmDtl).then((t=>{this.lectureroomDetailList=t.data.resultData}))},getLectureroomInfo(){this.searchUlsLtrmInfm.ltBldgCd=this.lectureInfo.ltBldgCD,this.searchUlsLtrmInfm.ltrmCd=this.lectureInfo.ltrmCd,this.$store.dispatch("common/getLectureroomInfo",this.searchUlsLtrmInfm).then((t=>{this.ulsLtrmInfm=t.data.resultData,this.$store.commit("common/setUlsLtrmInfm",this.ulsLtrmInfm)}))},getHrStngDiv(){this.searchSbjtMng.ltStaffNo=this.lectureInfo.staffNo,this.searchSbjtMng.openYr=this.lectureInfo.openYy,this.$store.dispatch("profsr/getSettingInfoList",this.searchSbjtMng).then((t=>{if(t.data.resultData.length>0){var e,s;const{resultData:n}=t.data,{openSbjtNo:o}=this.lectureInfo,i=n.filter((t=>t.openSbjtNo===o)),a=null===(e=i[0])||void 0===e?void 0:e.hrStngDiv,c=null===(s=i[0])||void 0===s?void 0:s.detmHrDiv;this.hrStngDiv="ULS55.30"===a||""===a||null===a?30:"ULS55.60"===a?60:30,this.detmHrDiv="ULS56.10"===c||""===c||null===c?10:"ULS56.20"===c?20:"ULS56.30"===c?30:"ULS56.40"===c?40:10}else this.hrStngDiv=30,this.detmHrDiv=10;this.classTime=!0}))},checkClassTime(){const t=this.lectureInfo.clsTm.split("~")[0].trim().split(":"),e=this.lectureInfo.clsTm.split("~")[1].trim().split(":"),s=new Date(this.now.yearStr,this.now.monthStr,this.now.dateStr,t[0],t[1],"00"),n=new Date(this.now.yearStr,this.now.monthStr,this.now.dateStr,e[0],e[1],"00"),o=new Date(this.now.yearStr,this.now.monthStr,this.now.dateStr,this.now.hourStr,this.now.minStr,"00");s.setMinutes(s.getMinutes()-this.hrStngDiv),n.setMinutes(n.getMinutes()-this.detmHrDiv),this.classTime=s<=o&&o<=n},getRegistData(t){this.cate=t,this.checkGps()},checkGps(){C.getCurrentPosition().then((t=>{this.myLat=t.coords.latitude.toString(),this.myLot=t.coords.longitude.toString();const e=[this.ulsLtrmInfm.lat1,this.ulsLtrmInfm.lat2,this.ulsLtrmInfm.lat3,this.ulsLtrmInfm.lat4,this.ulsLtrmInfm.lat5],n=[this.ulsLtrmInfm.lot1,this.ulsLtrmInfm.lot2,this.ulsLtrmInfm.lot3,this.ulsLtrmInfm.lot4,this.ulsLtrmInfm.lot5];for(let o=0;o<5;o++)s(n[o],e[o],this.myLot,this.myLat)<=100&&(this.gpsCheck=!0);"attendance"==this.cate?S.scan(this.scanOpt).then((t=>{t.text.length>0&&t.text===this.ulsLtrmInfm.ltrmCd?(this.qrCheck=!0,D.getConnectedSSID().then((t=>{this.network.name=t,D.getConnectedBSSID().then((t=>{this.lectureroomDetailList.forEach((e=>{e.macAddr.slice(0,14)===t.slice(0,14)&&(this.wifiCheck=!0),this.network.macAddress=t,this.check=!0})),this.setAttendance()}))}),(t=>{console.log(t),this.network.name="",this.network.macAddress="",this.check=!0,this.setAttendance()}))):(this.qrCheck=!1,f("강의실 QR 코드가 일치 하지 않습니다."),this.setAttendance())})):D.getConnectedSSID().then((t=>{this.network.name=t,D.getConnectedBSSID().then((t=>{switch(this.lectureroomDetailList.forEach((e=>{e.macAddr.slice(0,14)===t.slice(0,14)&&(this.wifiCheck=!0),this.network.macAddress=t})),this.cate){case"sendLoc":this.setAttendanceRecordParam("중간출석");break;case"quit":this.setAttendanceRecordParam("퇴실정보등록");break;case"code":this.$store.dispatch("stdnt/setAttCodeParam",this.setAttendance()),this.$store.commit("accessPopup/showCodeAttPopup",!0)}}))}),(t=>{switch(console.log(t),this.network.name="",this.network.macAddress="",this.cate){case"sendLoc":this.setAttendanceRecordParam("중간출석");break;case"quit":this.setAttendanceRecordParam("퇴실정보등록");break;case"code":this.$store.dispatch("stdnt/setAttCodeParam",this.setAttendance()),this.$store.commit("accessPopup/showCodeAttPopup",!0)}}))}))},setAttendance(){const t=new b;if(t.openYr=this.lectureInfo.openYy,t.openShtmCd=this.lectureInfo.openShtmCd,t.openOrgnClsfCd=this.lectureInfo.openOrgnClsfCd,t.openSust=this.lectureInfo.openSust,t.openDclss=this.lectureInfo.openDclss,t.openSbjtNo=this.lectureInfo.openSbjtNo,t.ltStaffNo=this.lectureInfo.staffNo,t.stdNo=this.lectureInfo.stdNo,t.attYmd=this.checkDate,t.wifiNm=this.network.name,t.wifiIp=this.network.macAddress,t.lat=this.myLat,t.lot=this.myLot,t.attPrcsQrYn=this.qrCheck?"Y":"N",this.lectureInfo.skpDt&&(t.skltDt=this.lectureInfo.skpDt),"code"===this.cate)return{attHist:t,wifiCheck:this.wifiCheck,gpsCheck:this.gpsCheck};this.$store.dispatch("common/setAttendance",t).then((e=>{this.att=e.data.resultData;const s=new y;s.openYr=this.att.openYr,s.openShtmCd=this.att.openShtmCd,s.openOrgnClsfCd=this.att.openOrgnClsfCd,s.openSust=this.att.openSust,s.attDiv=this.att.attDiv,s.openDclss=this.att.openDclss,s.openSbjtNo=this.att.openSbjtNo,s.ltStaffNo=this.att.ltStaffNo,s.stdNo=this.att.stdNo,s.attYmd=this.att.attYmd,s.wifiRcptnHr=this.now.hourStr+":"+this.now.minStr+":"+(new Date).getSeconds(),s.wifiRcptnItem="출석정보등록",this.lectureInfo.skpDt&&(s.skltDt=this.lectureInfo.skpDt),"Y"===t.attPrcsQrYn?(s.result="QR코드 일치",s.attResult=!0,this.attChk=!0,this.lectureInfo.attPrcsQrYn="Y",this.lectureInfo.attDiv="ULS58.10"):(s.result="QR코드 불일치",s.attResult=!1),this.wifiCheck||this.gpsCheck?s.result+=" / 범위 내 수신":this.wifiCheck||this.gpsCheck||(s.result+=" / Wifi 또는 GPS 정보가 일치하지 않음"),this.startTime=this.att.attPrcsDt,this.gps.lat=this.att.lat,this.gps.lot=this.att.lot,this.network.macAddress=this.att.wifiIp,this.setAttendanceRecord(s)}))},setAttendanceRecordParam(t){const e=new y;e.openYr=this.lectureInfo.openYy,e.openShtmCd=this.lectureInfo.openShtmCd,e.openOrgnClsfCd=this.lectureInfo.openOrgnClsfCd,e.openSust=this.lectureInfo.openSust,e.openDclss=this.lectureInfo.openDclss,e.openSbjtNo=this.lectureInfo.openSbjtNo,e.ltStaffNo=this.lectureInfo.staffNo,e.stdNo=this.lectureInfo.stdNo,e.attYmd=this.checkDate,e.wifiRcptnHr=this.now.hourStr+":"+this.now.minStr+":"+(new Date).getSeconds(),e.wifiRcptnItem=t,this.lectureInfo.skpDt&&(e.skltDt=this.lectureInfo.skpDt),this.qrCheck?(e.result="QR코드 일치",e.attResult=!0):(e.attDiv="",e.result="QR코드 불일치",e.attResult=!1),this.wifiCheck||this.gpsCheck?e.result+=" / 범위 내 수신":this.wifiCheck||this.gpsCheck||(e.result+=" / Wifi 또는 GPS 정보가 일치하지 않음"),"중간출석"!==t&&"퇴실정보등록"!==t||(e.result=""),this.setAttendanceRecord(e)},setAttendanceRecord(t){this.$store.dispatch("common/setAttendanceRecord",t),this.checkAtt(),"attendance"==this.cate&&t.attResult&&f("출석 정보 등록이 완료되었습니다."),"sendLoc"==this.cate&&f("중간 출석 정보 등록이 완료되었습니다."),"quit"==this.cate&&f("퇴실 정보 등록이 완료되었습니다.")},untactAtt(){this.classTime?this.popupYn?this.setProfsrParam():(this.popupYn=!0,this.untactPopupYn=!0,this.$store.commit("accessPopup/showAccessPopup",!0)):f("출석, 퇴실 정보 등록 가능한 시간이 아닙니다.")},dateFormat:t=>t.slice(0,4)+"."+t.slice(4,6)+"."+t.slice(6,8),setProfsrParam(){const t={lat:"",lot:"",ssid:"",macAddr:""};C.getCurrentPosition().then((e=>{t.lat=e.coords.latitude.toString(),t.lot=e.coords.longitude.toString(),D.getConnectedSSID().then((e=>{t.ssid=e,D.getConnectedBSSID().then((e=>{t.macAddr=e,this.$store.dispatch("stdnt/setProfsrCodeParam",t).then(this.$store.commit("accessPopup/showAlert",!0))}))}),(e=>{console.log(e),this.$store.dispatch("stdnt/setProfsrCodeParam",t).then(this.$store.commit("accessPopup/showAlert",!0))}))}))},setBeacon(t){this.cate=t,this.isBeacon=!0;"1"===this.lectureInfo.bcEquipYn?this.classTime?this.getBeaconList():f("출석, 퇴실 정보 등록 가능한 시간이 아닙니다."):f("비콘이 설치된 강의실이 아닙니다.")},async getBeaconList(){if(!this.lectureroomDetailList.length)return f("강의실 정보가 없습니다.\n강의실 정보를 다시 확인해주세요.");const t=new G;t.ltrmCd=this.lectureroomDetailList[0].ltrmCd,t.ltBldgCd=this.lectureroomDetailList[0].ltBldgCd;try{this.toggleBeaconPopup(!0),this.beaconPopupYn=!0,await this.$store.dispatch("common/getBeaconList",t).then((t=>{const{resultCode:e,resultMsg:s,resultData:n}=t.data;if(200===e){if(!n.length)return f("비콘 정보가 없습니다."),void this.toggleBeaconPopup(!1);this.startBeaconMonitoring(n),console.log(t.data.resultData,"res!!!")}else f(s)}))}catch(e){console.log(e)}},beaconAttendance({rssi:t="",bcDist:e=""}){const s=new b;s.openYr=this.lectureInfo.openYy,s.openShtmCd=this.lectureInfo.openShtmCd,s.openOrgnClsfCd=this.lectureInfo.openOrgnClsfCd,s.openSust=this.lectureInfo.openSust,s.openDclss=this.lectureInfo.openDclss,s.openSbjtNo=this.lectureInfo.openSbjtNo,s.ltStaffNo=this.lectureInfo.staffNo,s.stdNo=this.lectureInfo.stdNo,s.attYmd=this.checkDate,s.wifiNm=this.network.name,s.wifiIp=this.network.macAddress,s.lat=this.myLat,s.lot=this.myLot,s.attPrcsBcYn=""!==t&&""!==e?"Y":"N",s.rssi=t,s.bcDist=e,this.$store.dispatch("common/setAttendance",s).then((s=>{this.att=s.data.resultData;const n=new y;n.openYr=this.att.openYr,n.openShtmCd=this.att.openShtmCd,n.openOrgnClsfCd=this.att.openOrgnClsfCd,n.openSust=this.att.openSust,n.openDclss=this.att.openDclss,n.openSbjtNo=this.att.openSbjtNo,n.ltStaffNo=this.att.ltStaffNo,n.stdNo=this.att.stdNo,n.attYmd=this.att.attYmd,n.wifiRcptnHr=this.now.hourStr+":"+this.now.minStr+":"+(new Date).getSeconds(),n.wifiRcptnItem="출석정보등록",this.lectureInfo.skpDt&&(n.skltDt=this.lectureInfo.skpDt),t||e?(n.result="비콘정보 일치",this.attChk=!0,this.lectureInfo.attPrcsBcYn="Y",this.lectureInfo.attDiv="ULS58.10"):n.result="비콘정보 불일치",n.attResult=!1,this.startTime=this.att.attPrcsDt,this.gps.lat=this.att.lat,this.gps.lot=this.att.lot,this.network.macAddress=this.att.wifiIp,this.setAttendanceRecord(n)}))},beaconSendLoc({rssi:t="",bcDist:e=""}){console.log("beaconSendLoc");const s=new y;s.openYr=this.lectureInfo.openYy,s.openShtmCd=this.lectureInfo.openShtmCd,s.openOrgnClsfCd=this.lectureInfo.openOrgnClsfCd,s.openSust=this.lectureInfo.openSust,s.openDclss=this.lectureInfo.openDclss,s.openSbjtNo=this.lectureInfo.openSbjtNo,s.ltStaffNo=this.lectureInfo.staffNo,s.stdNo=this.lectureInfo.stdNo,s.attYmd=this.checkDate,s.wifiRcptnHr=this.now.hourStr+":"+this.now.minStr+":"+(new Date).getSeconds(),s.rssi=t,s.bcDist=e,s.attPrcsBcYn=""!==t&&""!==e?"Y":"N","sendLoc"===this.cate&&(s.wifiRcptnItem="중간출석"),"quit"===this.cate&&(s.wifiRcptnItem="퇴실정보등록"),this.lectureInfo.skpDt&&(s.skltDt=this.lectureInfo.skpDt),t||e?(s.result="비콘정보 일치",this.lectureInfo.attPrcsBcYn="Y"):s.result="비콘정보 불일치",s.attResult=!1,this.setAttendanceRecord(s)},updateBeaconData(t){this.$store.dispatch("common/setBeaconInfo",t)},toggleBeaconPopup(t){this.$store.commit("beaconPopup/showbeaconPopupToggle",t)},startBeaconMonitoring(t){console.log("startBeaconMonitoring");var e=cordova.plugins.locationManager;e.enableBluetooth();let s=0;this.beaconAuthStatus;const n=new e.Delegate,o=this.cate;let i=this.setStopBeaconMonitoring,a=this.toggleBeaconPopup;const c=this.beaconAttendance,l=this.beaconSendLoc,r=this.lectureroomDetailList[0],h=this.updateBeaconData;n.didRangeBeaconsInRegion=function(e){console.log("========================didRangeBeaconsInRegion========================"),console.log(JSON.stringify(e));let n=!1;t:for(let o in e.beacons)for(let i in t){if(e.beacons[o].uuid.toLowerCase()===t[i].uuid.toLowerCase()&&e.beacons[o].major==t[i].major&&e.beacons[o].minor==t[i].minor){var u;n=!0,s=null===(u=e.beacons[o])||void 0===u?void 0:u.battery,console.log("match");break t}console.log("not match")}if(n){r.battStat=s||0===s?s:"",h(r);let u="",p="";e.beacons.length&&(u=e.beacons[0].rssi,p=e.beacons[0].accuracy),"attendance"===o?c({rssi:u,bcDist:p}):l({rssi:u,bcDist:p}),i(t),a(!1),n=!1,f("비콘인증이 완료되었습니다."),clearTimeout(d)}},n.didStartMonitoringForRegion=t=>{console.log("========================didStartMonitoringForRegion========================"),console.log(JSON.stringify(t))},e.setDelegate(n);for(let p in t){var u=new e.BeaconRegion(p+1,t[p].uuid);e.startRangingBeaconsInRegion(u).fail(console.error).done(),e.startMonitoringForRegion(u).fail(console.error).done()}const d=setTimeout((()=>{if(!this.beaconAuthStatus)return this.stopBeaconMonitoring(t),this.toggleBeaconPopup(!1),f("비콘 인증에 실패하였습니다. \n강의실 정보를 확인하시거나 \n인증을 다시 시도해주세요")}),1e4)},setStopBeaconMonitoring(t){console.log("setStopBeaconMonitoring");let e=cordova.plugins.locationManager;for(let s in t){let n=new e.BeaconRegion(s+1,t[s].uuid);e.stopRangingBeaconsInRegion(n).fail(console.error).done(),e.stopMonitoringForRegion(n).fail(console.error).done()}},stopBeaconMonitoring(t){console.log("stopBeaconMonitoring");let e=cordova.plugins.locationManager;const s={rssi:"",bcDist:""};"attendance"===this.cate?this.beaconAttendance(s):this.beaconSendLoc(s);for(let n in t){let s=new e.BeaconRegion(n+1,t[n].uuid);e.stopRangingBeaconsInRegion(s).fail(console.error).done(),e.stopMonitoringForRegion(s).fail(console.error).done()}},notAttendanceAelrt(){f("이미 출결 정보가 등록되었습니다.")}}},z=t=>(M("data-v-17a77b59"),t=t(),H(),t),J={style:{"margin-top":"40px"}},K={class:"attendance--commute"},V=z((()=>R("div",{class:"sub-title"},[R("span",null,"출석, 퇴실 정보 등록")],-1))),X={class:"commute__date"},Z={class:"time--zone"},tt={class:"commute__tab"},et={class:"commute__table"},st={key:0,class:"commute__cell"},nt=z((()=>R("div",{class:"sub-title2"},[R("span",null,"출석정보 등록")],-1))),ot={key:0,class:"commute__complete"},it={key:0,class:"attendance_check"},at={key:1,class:"attendance_check"},ct={key:2,class:"attendance_check"},lt={key:1},rt={key:2},ht={key:1,class:"commute__cell"},ut=z((()=>R("div",{class:"sub-title2"},[R("span",null,"퇴실정보 등록")],-1))),dt={key:0,class:"commute__complete",style:{height:"auto"}},pt=[z((()=>R("p",null,[Y("퇴실정보 "),R("em",null,"등록이 완료"),Y("되었습니다.")],-1)))],mt={key:2,class:"commute__cell"},ft=z((()=>R("div",{class:"sub-title2"},[R("span",null,"중간출석 등록")],-1))),gt={class:"commute__location_state",style:{"margin-top":"0"}},St={key:3,class:"commute__cell"},Dt=z((()=>R("div",{class:"sub-title2"},[R("span",null,"등록 된 출석정보")],-1))),Ct={class:"cell__contents"},It=z((()=>R("strong",null,"무선AP Mac주소",-1))),wt=z((()=>R("strong",null,"GPS 좌표",-1))),kt=z((()=>R("strong",null,"시간",-1))),bt={class:"attendance--detail"},yt=z((()=>R("div",{class:"sub-title"},[R("span",null,"출결 상세정보")],-1))),vt={class:"detail__time_table"},Lt={border:"1"},At=z((()=>R("caption",null," 출결 상세정보 타임테이블 ",-1))),Rt=z((()=>R("colgroup",null,[R("col",{style:{width:"20%"}}),R("col",{style:{width:"30%"}}),R("col",{style:{width:"50%"}})],-1))),Pt={scope:"row"},_t={class:"correct"},Nt={key:0},Yt={key:1},Bt={class:"correct not"},jt={key:0},Mt=[z((()=>R("tr",null,[R("th",{colspan:"3",class:"no-item"},"등록된 출결 정보가 없습니다.")],-1)))];const Ht=m(E,[["render",function(t,e,s,n,o,i){return L(),A("div",J,[R("div",K,[V,R("div",X,[R("span",null,P(o.now.yearStr)+"."+P(o.now.monthStr)+"."+P(o.now.dateStr)+" ("+P(o.now.dayStr)+")",1),R("strong",Z,P(o.now.hourStr)+" : "+P(o.now.minStr)+" : "+P(o.now.secStr),1)]),R("div",tt,[R("a",{class:_(["tab__button",{"is--on":1==o.activeTabBtn}]),onClick:e[0]||(e[0]=t=>o.activeTabBtn=1)},"출석등록",2),R("a",{class:_(["tab__button",{"is--on":3==o.activeTabBtn}]),onClick:e[1]||(e[1]=t=>o.activeTabBtn=3)},"중간출석",2),R("a",{class:_(["tab__button",{"is--on":2==o.activeTabBtn}]),onClick:e[2]||(e[2]=t=>o.activeTabBtn=2)},"퇴실등록",2)]),R("div",et,[1==o.activeTabBtn?(L(),A("div",st,[nt,o.attChk?(L(),A("div",ot,[R("p",null,[R("em",null,["Y"===o.lectureInfo.attPrcsCdYn?(L(),A("span",it,"출석코드")):N("",!0),"Y"===o.lectureInfo.attPrcsBcYn?(L(),A("span",at,"비콘")):N("",!0),"Y"===o.lectureInfo.attPrcsQrYn?(L(),A("span",ct,"QR코드")):N("",!0),Y(" 등록이 완료 ")]),Y(" 되었습니다. ")])])):N("",!0),null===o.lectureInfo.attDiv||""===o.lectureInfo.attDiv?(L(),A("div",lt,[R("button",{class:"commute__link",onClick:e[3]||(e[3]=t=>i.getRegistData("attendance")),type:"button"}," QR 코드로 등록 "),R("button",{class:"commute__link",onClick:e[4]||(e[4]=t=>i.setBeacon("attendance")),type:"button"}," 비콘으로 등록 "),R("button",{class:"commute__link",onClick:e[5]||(e[5]=t=>i.untactAtt()),type:"button"}," 출석코드로 등록 ")])):(L(),A("div",rt,[R("button",{class:"commute__link disabled",onClick:e[6]||(e[6]=t=>{i.notAttendanceAelrt()}),type:"button"}," QR 코드로 등록 "),R("button",{class:"commute__link disabled",onClick:e[7]||(e[7]=t=>{i.notAttendanceAelrt()}),type:"button"}," 비콘으로 등록 "),R("button",{class:"commute__link",onClick:e[8]||(e[8]=t=>i.untactAtt()),type:"button"}," 출석코드로 등록 ")]))])):N("",!0),2==o.activeTabBtn?(L(),A("div",ht,[ut,o.quitChk?(L(),A("div",dt,pt)):N("",!0),o.quitChk?N("",!0):(L(),A("a",{key:1,class:"commute__link",onClick:e[9]||(e[9]=t=>i.getRegistData("quit"))},"퇴실정보 등록"))])):N("",!0),3==o.activeTabBtn?(L(),A("div",mt,[ft,R("p",gt,[R("span",null,P(o.attLocRecord.openYr?"마지막 전송 : "+i.dateFormat(o.attLocRecord.attYmd)+" ("+o.attLocRecord.wifiRcptnHr+")":"전송기록이 없습니다."),1)]),R("a",{class:"commute__link",onClick:e[10]||(e[10]=t=>i.getRegistData("sendLoc"))},"중간출석 등록하기")])):N("",!0),o.attChk?(L(),A("div",St,[Dt,R("ul",Ct,[R("li",null,[It,Y(" "+P(o.network.macAddress),1)]),R("li",null,[wt,Y(" "+P(o.gps.lat)+" / "+P(o.gps.lot),1)]),R("li",null,[kt,Y(" "+P(o.startTime),1)])])])):N("",!0)])]),R("div",bt,[yt,R("div",vt,[R("table",Lt,[At,Rt,R("tbody",null,[(L(!0),A(B,null,j(o.histList,((t,e)=>(L(),A("tr",{key:e},[R("th",Pt,P(t.wifiRcptnHr),1),R("td",_t,P(t.wifiRcptnItem),1),R("td",null,[t.result?(L(),A("span",Nt,[R("span",{class:_(["correct",{not:t.result.includes("일치하지 않음")||t.result.includes("불일치")||t.result.includes("초과")}])},P(t.result),3)])):N("",!0),t.result?N("",!0):(L(),A("span",Yt,[R("span",Bt,P(t.result),1)]))])])))),128))]),o.histList.length<=0?(L(),A("tbody",jt,Mt)):N("",!0)])])])])}],["__scopeId","data-v-17a77b59"]]),Tt={class:"attendance--page"},$t={class:"app_container"},Ot={class:"attendance--class"},qt={class:"class__head"},Ut=R("div",{class:"sub-title pt-top"},[R("span",null,"과목정보")],-1);e("default",{__name:"StdntClassAtt",setup(t){const e=T("cont"),s=T(!1);return p((()=>{e.value.$el.scrollToPoint(0,0)})),(t,n)=>{const o=$("ion-content"),i=$("ion-page");return L(),O(i,null,{default:q((()=>[U(o,{fullscreen:!0,ref_key:"cont",ref:e},{default:q((()=>[R("div",Tt,[R("div",$t,[R("div",Ot,[R("div",qt,[Ut,R("button",{type:"button",class:_(["class__toggle",{"is--down":s.value}]),onClick:n[0]||(n[0]=t=>{s.value=!s.value})},"열고 접기",2)]),R("div",{class:_(["class__body",{"is--hidden":s.value}])},[U(Q(g))],2)]),U(Q(Ht),{ref:"regist"},null,512)])])])),_:1},512)])),_:1})}}})}}}))}();
