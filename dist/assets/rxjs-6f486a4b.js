import{c as I,_ as w,d as y,e as k,f as B,b as q,g as A,a as z,h as N}from"./tslib-f1640d2e.js";function s(r){return typeof r=="function"}function rr(r){var e=function(t){Error.call(t),t.stack=new Error().stack},n=r(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var T=rr(function(r){return function(n){r(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(t,i){return i+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}});function Y(r,e){if(r){var n=r.indexOf(e);0<=n&&r.splice(n,1)}}var U=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,n,t,i,o;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var a=I(u),c=a.next();!c.done;c=a.next()){var f=c.value;f.remove(this)}}catch(l){e={error:l}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else u.remove(this);var d=this.initialTeardown;if(s(d))try{d()}catch(l){o=l instanceof T?l.errors:[l]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var v=I(b),h=v.next();!h.done;h=v.next()){var m=h.value;try{C(m)}catch(l){o=o!=null?o:[],l instanceof T?o=w(w([],y(o)),y(l.errors)):o.push(l)}}}catch(l){t={error:l}}finally{try{h&&!h.done&&(i=v.return)&&i.call(v)}finally{if(t)throw t.error}}}if(o)throw new T(o)}},r.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)C(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},r.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},r.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},r.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Y(n,e)},r.prototype.remove=function(e){var n=this._finalizers;n&&Y(n,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}();U.EMPTY;function J(r){return r instanceof U||r&&"closed"in r&&s(r.remove)&&s(r.add)&&s(r.unsubscribe)}function C(r){s(r)?r():r.unsubscribe()}var Q={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},P={setTimeout:function(r,e){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];var i=P.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,w([r,e],y(n))):setTimeout.apply(void 0,w([r,e],y(n)))},clearTimeout:function(r){var e=P.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(r)},delegate:void 0};function V(r){P.setTimeout(function(){throw r})}function D(){}function er(r){r()}var _=function(r){k(e,r);function e(n){var t=r.call(this)||this;return t.isStopped=!1,n?(t.destination=n,J(n)&&n.add(t)):t.destination=or,t}return e.create=function(n,t,i){return new L(n,t,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(U),nr=Function.prototype.bind;function x(r,e){return nr.call(r,e)}var tr=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(t){g(t)}},r.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(t){g(t)}else g(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){g(n)}},r}(),L=function(r){k(e,r);function e(n,t,i){var o=r.call(this)||this,u;if(s(n)||!n)u={next:n!=null?n:void 0,error:t!=null?t:void 0,complete:i!=null?i:void 0};else{var a;o&&Q.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},u={next:n.next&&x(n.next,a),error:n.error&&x(n.error,a),complete:n.complete&&x(n.complete,a)}):u=n}return o.destination=new tr(u),o}return e}(_);function g(r){V(r)}function ir(r){throw r}var or={closed:!0,next:D,error:ir,complete:D},R=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ur(r){return r}function cr(r){return r.length===0?ur:r.length===1?r[0]:function(n){return r.reduce(function(t,i){return i(t)},n)}}var p=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var n=new r;return n.source=this,n.operator=e,n},r.prototype.subscribe=function(e,n,t){var i=this,o=sr(e)?e:new L(e,n,t);return er(function(){var u=i,a=u.operator,c=u.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},r.prototype.forEach=function(e,n){var t=this;return n=G(n),new n(function(i,o){var u=new L({next:function(a){try{e(a)}catch(c){o(c),u.unsubscribe()}},error:o,complete:i});t.subscribe(u)})},r.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},r.prototype[R]=function(){return this},r.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return cr(e)(this)},r.prototype.toPromise=function(e){var n=this;return e=G(e),new e(function(t,i){var o;n.subscribe(function(u){return o=u},function(u){return i(u)},function(){return t(o)})})},r.create=function(e){return new r(e)},r}();function G(r){var e;return(e=r!=null?r:Q.Promise)!==null&&e!==void 0?e:Promise}function ar(r){return r&&s(r.next)&&s(r.error)&&s(r.complete)}function sr(r){return r&&r instanceof _||ar(r)&&J(r)}function fr(r){return s(r==null?void 0:r.lift)}function K(r){return function(e){if(fr(e))return e.lift(function(n){try{return r(n,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function O(r,e,n,t,i){return new lr(r,e,n,t,i)}var lr=function(r){k(e,r);function e(n,t,i,o,u,a){var c=r.call(this,n)||this;return c.onFinalize=u,c.shouldUnsubscribe=a,c._next=t?function(f){try{t(f)}catch(d){n.error(d)}}:r.prototype._next,c._error=o?function(f){try{o(f)}catch(d){n.error(d)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:r.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;r.prototype.unsubscribe.call(this),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(_),W=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function dr(r){return s(r==null?void 0:r.then)}function hr(r){return s(r[R])}function vr(r){return Symbol.asyncIterator&&s(r==null?void 0:r[Symbol.asyncIterator])}function pr(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function yr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var br=yr();function mr(r){return s(r==null?void 0:r[br])}function Sr(r){return B(this,arguments,function(){var n,t,i,o;return q(this,function(u){switch(u.label){case 0:n=r.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,A(n.read())];case 3:return t=u.sent(),i=t.value,o=t.done,o?[4,A(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,A(i)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function wr(r){return s(r==null?void 0:r.getReader)}function M(r){if(r instanceof p)return r;if(r!=null){if(hr(r))return Er(r);if(W(r))return gr(r);if(dr(r))return Ar(r);if(vr(r))return X(r);if(mr(r))return Tr(r);if(wr(r))return xr(r)}throw pr(r)}function Er(r){return new p(function(e){var n=r[R]();if(s(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gr(r){return new p(function(e){for(var n=0;n<r.length&&!e.closed;n++)e.next(r[n]);e.complete()})}function Ar(r){return new p(function(e){r.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,V)})}function Tr(r){return new p(function(e){var n,t;try{for(var i=I(r),o=i.next();!o.done;o=i.next()){var u=o.value;if(e.next(u),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}e.complete()})}function X(r){return new p(function(e){Ir(r,e).catch(function(n){return e.error(n)})})}function xr(r){return X(Sr(r))}function Ir(r,e){var n,t,i,o;return z(this,void 0,void 0,function(){var u,a;return q(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=N(r),c.label=1;case 1:return[4,n.next()];case 2:if(t=c.sent(),!!t.done)return[3,4];if(u=t.value,e.next(u),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),t&&!t.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Pr(r,e,n,t,i){t===void 0&&(t=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?r.add(this.schedule(null,t)):this.unsubscribe()},t);if(r.add(o),!i)return o}function Z(r,e){return K(function(n,t){var i=0;n.subscribe(O(t,function(o){t.next(r.call(e,o,i++))}))})}var Lr=Array.isArray;function Or(r,e){return Lr(e)?r.apply(void 0,w([],y(e))):r(e)}function kr(r){return Z(function(e){return Or(r,e)})}function Ur(r,e,n,t,i,o,u,a){var c=[],f=0,d=0,b=!1,v=function(){b&&!c.length&&!f&&e.complete()},h=function(l){return f<t?m(l):c.push(l)},m=function(l){o&&e.next(l),f++;var F=!1;M(n(l,d++)).subscribe(O(e,function(S){i==null||i(S),o?h(S):e.next(S)},function(){F=!0},void 0,function(){if(F)try{f--;for(var S=function(){var E=c.shift();u?Pr(e,u,function(){return m(E)}):m(E)};c.length&&f<t;)S();v()}catch(E){e.error(E)}}))};return r.subscribe(O(e,h,function(){b=!0,v()})),function(){a==null||a()}}function $(r,e,n){return n===void 0&&(n=1/0),s(e)?$(function(t,i){return Z(function(o,u){return e(t,o,i,u)})(M(r(t,i)))},n):(typeof e=="number"&&(n=e),K(function(t,i){return Ur(t,i,r,n)}))}var _r=["addListener","removeListener"],Rr=["addEventListener","removeEventListener"],Mr=["on","off"];function H(r,e,n,t){if(s(n)&&(t=n,n=void 0),t)return H(r,e,n).pipe(kr(t));var i=y(Cr(r)?Rr.map(function(a){return function(c){return r[a](e,c,n)}}):Fr(r)?_r.map(j(r,e)):Yr(r)?Mr.map(j(r,e)):[],2),o=i[0],u=i[1];if(!o&&W(r))return $(function(a){return H(a,e,n)})(M(r));if(!o)throw new TypeError("Invalid event target");return new p(function(a){var c=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return a.next(1<f.length?f:f[0])};return o(c),function(){return u(c)}})}function j(r,e){return function(n){return function(t){return r[n](e,t)}}}function Fr(r){return s(r.addListener)&&s(r.removeListener)}function Yr(r){return s(r.on)&&s(r.off)}function Cr(r){return s(r.addEventListener)&&s(r.removeEventListener)}export{p as O,H as f};
